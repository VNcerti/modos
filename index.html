<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kho Ứng Dụng Cho iPhone/iPad</title>
    <link rel="icon" href="https://i.imgur.com/k0zikhA.png" type="image/x-icon">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="css/styles.css">
    
    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/9.22.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.1/firebase-database-compat.js"></script>
    
    <style>
        /* Ripple effect cho theme toggle */
        .ripple {
            position: absolute;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.7);
            transform: scale(0);
            animation: ripple-animation 0.6s linear;
        }
        
        @keyframes ripple-animation {
            to {
                transform: scale(4);
                opacity: 0;
            }
        }
        
        /* Pulse effect cho nút Telegram */
        @keyframes pulse {
            0% {
                transform: scale(1);
            }
            50% {
                transform: scale(1.1);
            }
            100% {
                transform: scale(1);
            }
        }
        
        .telegram-btn:hover {
            animation: pulse 0.5s ease-in-out;
        }
    </style>
</head>
<body>
    <!-- Header -->
    <header class="header">
        <div class="container">
            <div class="header-content">
                <a href="#" class="logo">
                    <div class="logo-icon">
                        <i class="fas fa-rocket"></i>
                    </div>
                    XSpace Store
                </a>
                <div class="search-bar">
                    <i class="fas fa-search"></i>
                    <input type="text" id="searchInput" placeholder="Tìm kiếm ứng dụng...">
                </div>
                <div class="user-actions">
                    <!-- Nút chuyển đổi chế độ sáng/tối -->
                    <button class="icon-btn theme-toggle" id="themeToggle">
                        <i class="fas fa-sun theme-icon sun-icon"></i>
                        <i class="fas fa-moon theme-icon moon-icon"></i>
                    </button>
                    <!-- Nút Telegram -->
                    <a href="https://t.me/xspace_ipa" target="_blank" class="icon-btn telegram-btn" id="telegramBtn">
                        <i class="fas fa-bell"></i>
                    </a>
                </div>
            </div>
        </div>
    </header>

    <!-- Hero Section -->
    <section class="hero">
        <div class="container">
            <div class="hero-content">
                <h1>Khám phá kho ứng dụng iPA đỉnh cao</h1>
                <p>Tận hưởng thế giới ứng dụng và trò chơi được tuyển chọn kỹ lưỡng, hoàn toàn miễn phí. Tải về các bản iPA chất lượng, mở khóa trải nghiệm mà trước đây bạn chưa từng thấy trong App Store.</p>
                <a href="#" class="cta-button">
                    <i class="fas fa-download"></i>
                    Khám phá ngay
                </a>
            </div>
        </div>
    </section>

    <!-- Main Content -->
    <main class="container">
        <!-- Featured Apps Carousel -->
        <section class="featured-section">
            <div class="section-title">
                <span>Ứng dụng nổi bật</span>
                <a href="#" class="view-all">Xem tất cả</a>
            </div>
            <div class="featured-carousel">
                <!-- Navigation Arrows -->
                <div class="nav-arrow prev">
                    <i class="fas fa-chevron-left"></i>
                </div>
                <div class="nav-arrow next">
                    <i class="fas fa-chevron-right"></i>
                </div>

                <!-- Carousel Container -->
                <div class="carousel-container" id="featuredCarousel">
                    <!-- Featured Cards will be loaded by JavaScript -->
                    <div class="featured-loading" id="featuredLoading">
                        <div class="featured-skeleton"></div>
                        <div class="featured-skeleton"></div>
                        <div class="featured-skeleton"></div>
                        <div class="featured-skeleton"></div>
                        <div class="featured-skeleton"></div>
                    </div>
                </div>

                <!-- Scroll Indicator -->
                <div class="scroll-indicator">
                    <i class="fas fa-arrows-alt-h"></i>
                    Kéo để xem thêm
                </div>

                <!-- Dots Navigation -->
                <div class="carousel-nav">
                    <div class="carousel-dot active" data-index="0"></div>
                    <div class="carousel-dot" data-index="1"></div>
                    <div class="carousel-dot" data-index="2"></div>
                    <div class="carousel-dot" data-index="3"></div>
                    <div class="carousel-dot" data-index="4"></div>
                </div>
            </div>
        </section>

        <!-- Categories -->
        <section class="categories-section">
            <div class="section-title">
                <span>Thể loại</span>
                <a href="#" class="view-all">Xem tất cả</a>
            </div>
            <div class="categories-scroll">
                <div class="category-card active" data-category="all">
                    <div class="category-icon">
                        <i class="fas fa-star"></i>
                    </div>
                    <div class="category-name">Tất cả</div>
                </div>
                <div class="category-card" data-category="game">
                    <div class="category-icon">
                        <i class="fas fa-gamepad"></i>
                    </div>
                    <div class="category-name">Trò chơi</div>
                </div>
                <div class="category-card" data-category="social">
                    <div class="category-icon">
                        <i class="fas fa-users"></i>
                    </div>
                    <div class="category-name">Mạng xã hội</div>
                </div>
                <div class="category-card" data-category="entertainment">
                    <div class="category-icon">
                        <i class="fas fa-film"></i>
                    </div>
                    <div class="category-name">Giải trí</div>
                </div>
                <div class="category-card" data-category="photo">
                    <div class="category-icon">
                        <i class="fas fa-camera"></i>
                    </div>
                    <div class="category-name">Ảnh & Video</div>
                </div>
                <div class="category-card" data-category="clone">
                    <div class="category-icon">
                        <i class="fas fa-copy"></i>
                    </div>
                    <div class="category-name">Nhân bản</div>
                </div>
                <div class="category-card" data-category="premium">
                    <div class="category-icon">
                        <i class="fas fa-unlock"></i>
                    </div>
                    <div class="category-name">Mở khoá Premium</div>
                </div>
                <!-- THÊM MỤC MỚI: Giáo dục -->
                <div class="category-card" data-category="education">
                    <div class="category-icon">
                        <i class="fas fa-graduation-cap"></i>
                    </div>
                    <div class="category-name">Giáo dục</div>
                </div>
                <!-- THÊM MỤC MỚI: Sức khỏe -->
                <div class="category-card" data-category="health">
                    <div class="category-icon">
                        <i class="fas fa-heartbeat"></i>
                    </div>
                    <div class="category-name">Sức khỏe</div>
                </div>
                <!-- THÊM MỤC MỚI: Tiện ích -->
                <div class="category-card" data-category="utility">
                    <div class="category-icon">
                        <i class="fas fa-tools"></i>
                    </div>
                    <div class="category-name">Tiện ích</div>
                </div>
            </div>
        </section>

        <!-- Apps Section -->
        <section class="apps-section">
            <div class="section-title">
                <span id="sectionTitle">Ứng dụng mới</span>
                <a href="#" class="view-all">Xem thêm</a>
            </div>
            <div class="apps-grid" id="appsGrid">
                <!-- Skeleton loading sẽ được thêm bằng JavaScript -->
            </div>
        </section>

        <!-- Popular Games -->
        <section class="apps-section" id="gamesSection">
            <div class="section-title">
                <span>Trò chơi phổ biến</span>
                <a href="#" class="view-all">Xem thêm</a>
            </div>
            <div class="apps-grid" id="gamesGrid">
                <!-- Games will be loaded here -->
            </div>
        </section>
    </main>

    <!-- Search Modal -->
    <div class="search-modal" id="searchModal">
        <div class="search-modal-content">
            <div class="search-modal-header">
                <button class="close-search" id="closeSearch">
                    <i class="fas fa-times"></i>
                </button>
                <input type="text" class="search-modal-input" id="searchModalInput" placeholder="Tìm kiếm ứng dụng...">
            </div>
            <div class="search-results" id="searchResults">
                <!-- Kết quả tìm kiếm sẽ hiển thị ở đây -->
            </div>
        </div>
    </div>

    <!-- Bottom Navigation -->
    <nav class="bottom-nav">
        <div class="container">
            <div class="nav-items">
                <a href="#" class="nav-item active" data-view="home">
                    <div class="nav-icon">
                        <i class="fas fa-home"></i>
                    </div>
                    <div class="nav-label">Trang chủ</div>
                </a>
                <a href="#" class="nav-item" data-view="today">
                    <div class="nav-icon">
                        <i class="fas fa-calendar-day"></i>
                    </div>
                    <div class="nav-label">Hôm nay</div>
                </a>
                <a href="#" class="nav-item" data-view="search" id="searchNavItem">
                    <div class="nav-icon">
                        <i class="fas fa-search"></i>
                    </div>
                    <div class="nav-label">Tìm kiếm</div>
                </a>
                <a href="#" class="nav-item" data-view="games">
                    <div class="nav-icon">
                        <i class="fas fa-gamepad"></i>
                    </div>
                    <div class="nav-label">Trò chơi</div>
                </a>
                <!-- ĐÃ ĐỔI "YÊU CẦU" THÀNH "TÀI KHOẢN" -->
                <a href="account.html" class="nav-item">
                    <div class="nav-icon">
                        <i class="fas fa-user"></i>
                    </div>
                    <div class="nav-label">Tài khoản</div>
                </a>
            </div>
        </div>
    </nav>

    <script src="js/config.js"></script>
    <script src="js/utils.js"></script>
    <script src="js/app.js"></script>
    <script src="js/firebase-analytics.js"></script>
    
    <!-- JavaScript cho chế độ sáng/tối -->
    <script>
        // Quản lý chế độ sáng/tối
        class ThemeManager {
            constructor() {
                this.themeToggle = document.getElementById('themeToggle');
                this.htmlElement = document.documentElement;
                this.body = document.body;
                this.init();
            }
            
            init() {
                // Kiểm tra theme đã lưu
                const savedTheme = localStorage.getItem('theme');
                
                // Áp dụng theme đã lưu hoặc mặc định (light)
                if (savedTheme === 'dark') {
                    this.setTheme('dark');
                } else {
                    // Mặc định là light mode
                    this.setTheme('light');
                    localStorage.setItem('theme', 'light');
                }
                
                // Thêm sự kiện click cho nút chuyển đổi
                this.themeToggle.addEventListener('click', (e) => this.toggleTheme(e));
            }
            
            setTheme(theme) {
                const isDark = theme === 'dark';
                this.htmlElement.setAttribute('data-theme', isDark ? 'dark' : 'light');
                localStorage.setItem('theme', isDark ? 'dark' : 'light');
                
                // Cập nhật icon
                this.updateThemeIcon(isDark);
                
                // Cập nhật meta theme-color cho viền trên cùng
                this.updateMetaThemeColor(isDark);
            }
            
            toggleTheme(e) {
                const currentTheme = this.htmlElement.getAttribute('data-theme');
                const isDark = currentTheme === 'dark';
                this.setTheme(isDark ? 'light' : 'dark');
                
                // Thêm hiệu ứng ripple
                this.createRippleEffect(e);
            }
            
            updateThemeIcon(isDark) {
                const sunIcon = this.themeToggle.querySelector('.sun-icon');
                const moonIcon = this.themeToggle.querySelector('.moon-icon');
                
                if (isDark) {
                    sunIcon.style.opacity = '0';
                    sunIcon.style.transform = 'rotate(90deg) scale(0.5)';
                    moonIcon.style.opacity = '1';
                    moonIcon.style.transform = 'rotate(0deg) scale(1)';
                } else {
                    sunIcon.style.opacity = '1';
                    sunIcon.style.transform = 'rotate(0deg) scale(1)';
                    moonIcon.style.opacity = '0';
                    moonIcon.style.transform = 'rotate(-90deg) scale(0.5)';
                }
            }
            
            updateMetaThemeColor(isDark) {
                // Cập nhật màu theme cho thanh địa chỉ và UI trình duyệt
                const themeColor = isDark ? '#0f172a' : '#ffffff';
                
                let metaThemeColor = document.querySelector('meta[name="theme-color"]');
                if (!metaThemeColor) {
                    metaThemeColor = document.createElement('meta');
                    metaThemeColor.name = 'theme-color';
                    document.head.appendChild(metaThemeColor);
                }
                metaThemeColor.content = themeColor;
                
                // Cập nhật màu cho Safari
                let metaAppleThemeColor = document.querySelector('meta[name="apple-mobile-web-app-status-bar-style"]');
                if (!metaAppleThemeColor) {
                    metaAppleThemeColor = document.createElement('meta');
                    metaAppleThemeColor.name = 'apple-mobile-web-app-status-bar-style';
                    document.head.appendChild(metaAppleThemeColor);
                }
                metaAppleThemeColor.content = isDark ? 'black' : 'default';
            }
            
            createRippleEffect(event) {
                const button = event.currentTarget;
                const circle = document.createElement('span');
                const diameter = Math.max(button.clientWidth, button.clientHeight);
                const radius = diameter / 2;
                
                circle.style.width = circle.style.height = `${diameter}px`;
                circle.style.left = `${event.clientX - button.getBoundingClientRect().left - radius}px`;
                circle.style.top = `${event.clientY - button.getBoundingClientRect().top - radius}px`;
                circle.classList.add('ripple');
                
                const ripple = button.getElementsByClassName('ripple')[0];
                if (ripple) {
                    ripple.remove();
                }
                
                button.appendChild(circle);
                
                // Xóa ripple sau khi animation kết thúc
                setTimeout(() => {
                    if (circle.parentNode === button) {
                        button.removeChild(circle);
                    }
                }, 600);
            }
        }
        
        // Khởi tạo khi trang được tải
        document.addEventListener('DOMContentLoaded', () => {
            const themeManager = new ThemeManager();
            
            // Kiểm tra và áp dụng theme ngay lập tức để tránh flash
            const savedTheme = localStorage.getItem('theme');
            if (savedTheme === 'dark') {
                document.documentElement.setAttribute('data-theme', 'dark');
            }
        });
        
        // Xử lý nút Telegram
        document.getElementById('telegramBtn').addEventListener('click', function(e) {
            // Mở trong tab mới
            window.open(this.href, '_blank');
        });
    </script>
</body>
</html>
